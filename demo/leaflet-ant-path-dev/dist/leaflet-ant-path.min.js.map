{"version":3,"sources":["leaflet-ant-path.js"],"names":["factory","window","define","amd","exports","module","require","L","Polyline","AntPath","polyline","antPath","path","options","FeatureGroup","extend","_path","_animatedPathid","_animatedPathClass","delay","dashArray","pulseColor","initialize","LayerGroup","prototype","call","this","Util","setOptions","_map","Date","getTime","_draw","onAdd","map","on","_calculateAnimationSpeed","onRemove","off","pathOpts","pulseOpts","color","className","addLayer","zoomLevel","getZoom","animatedPolyElement","document","getElementsByClassName","animationDuration","setAttribute"],"mappings":"CAAC,SAAUA,EAASC,GAChB,YAIsB,mBAAXC,SAAyBA,OAAOC,IACvCD,QAAQ,WAAYF,GAGM,gBAAZI,SACdC,OAAOD,QAAUJ,EAAQM,QAAQ,YAIV,mBAAXL,IAA0BA,EAAOM,IAC7CN,EAAOM,EAAEC,SAASC,QAAUT,EAAQO,GAEpCN,EAAOM,EAAEG,SAASC,QAAU,SAAUC,EAAMC,GACxC,MAAO,IAAIZ,GAAOM,EAAEC,SAASC,QAAQG,EAAMC,MAGrD,SAAUN,GACR,YAQA,IAAIE,GAAUF,EAAEO,aAAaC,QACzBC,MAAO,KACPC,gBAAiB,KACjBC,mBAAoB,mBAGpBL,SACIM,MAAO,IACPC,WAAY,GAAI,IAChBC,WAAY,WAGhBC,WAAY,SAAUV,EAAMC,GACxBN,EAAEgB,WAAWC,UAAUF,WAAWG,KAAKC,MACvCnB,EAAEoB,KAAKC,WAAWF,KAAMb,GACxBa,KAAKG,KAAO,KACZH,KAAKV,MAAQJ,EACbc,KAAKT,gBAAkB,aAAc,GAAIa,OAAOC,UAChDL,KAAKM,SAGTC,MAAO,SAAUC,GACbR,KAAKG,KAAOK,EACZR,KAAKG,KAAKM,GAAG,UAAWT,KAAKU,yBAA0BV,MAEvDA,KAAKM,QACLN,KAAKU,4BAGTC,SAAU,SAAUH,GAChBR,KAAKG,KAAKS,IAAI,UAAWZ,KAAKU,yBAA0BV,MACxDA,KAAKG,KAAO,KACZtB,EAAEgB,WAAWC,UAAUa,SAASZ,KAAKC,KAAMQ,IAG/CF,MAAO,WACH,GAAIO,MACAC,IAEJjC,GAAEQ,OAAOyB,EAAWd,KAAKb,SACzBN,EAAEQ,OAAOwB,EAAUb,KAAKb,SAExB2B,EAAUC,MAAQD,EAAUnB,YAAcK,KAAKb,QAAQQ,WACvDmB,EAAUE,UAAYhB,KAAKR,mBAAqB,IAAMQ,KAAKT,sBAEpDsB,GAASnB,UAEhBM,KAAKiB,SAASpC,EAAEG,SAASgB,KAAKV,MAAOuB,IACrCb,KAAKiB,SAASpC,EAAEG,SAASgB,KAAKV,MAAOwB,KAGzCJ,yBAA0B,WACtB,GAAIQ,GAAYlB,KAAKG,KAAKgB,UACtBC,EAAsBC,SAASC,uBAAuBtB,KAAKT,iBAG3DgC,EAAoB,EAAKvB,KAAKb,QAAQM,MAAQ,EAAKyB,EAAY,GAGnEE,GAAoB,GAAGI,aAAa,QAAS,8BAAgCD,GAC7EH,EAAoB,GAAGI,aAAa,QAAS,2BAA6BD,GAC1EH,EAAoB,GAAGI,aAAa,QAAS,sBAAwBD,KAI7E,OAAOxC,IACRR","file":"leaflet-ant-path.min.js","sourcesContent":["(function (factory, window) {\n    \"use strict\";\n\n    /* istanbul ignore next */\n    // define an AMD module that relies on 'leaflet'\n    if (typeof define === 'function' && define.amd) {\n        define(['leaflet'], factory);\n\n        // define a Common JS module that relies on 'leaflet'\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('leaflet'));\n    }\n\n    // attach your plugin to the global 'L' variable\n    else if (typeof window !== 'undefined' && window.L) {\n        window.L.Polyline.AntPath = factory(L);\n\n        window.L.polyline.antPath = function (path, options) {\n            return new window.L.Polyline.AntPath(path, options);\n        };\n    }\n}(function (L) {\n    \"use strict\";\n\n    /**\n     * Builds a polyline with a ant path animation\n     * @constructor\n     * @extends L.FeatureGroup\n     * @exports L.Polyline.AntPath\n     */\n    var AntPath = L.FeatureGroup.extend({\n        _path: null,\n        _animatedPathid: null,\n        _animatedPathClass: 'leaflet-ant-path',\n\n        /* default options */\n        options: {\n            delay: 200,\n            dashArray: [10, 20],\n            pulseColor: '#FFFFFF'\n        },\n\n        initialize: function (path, options) {\n            L.LayerGroup.prototype.initialize.call(this);\n            L.Util.setOptions(this, options);\n            this._map = null;\n            this._path = path;\n            this._animatedPathid = 'ant-path-' + new Date().getTime();\n            this._draw();\n        },\n\n        onAdd: function (map) {\n            this._map = map;\n            this._map.on('zoomend', this._calculateAnimationSpeed, this);\n\n            this._draw();\n            this._calculateAnimationSpeed();\n        },\n\n        onRemove: function (map) {\n            this._map.off('zoomend', this._calculateAnimationSpeed, this);\n            this._map = null;\n            L.LayerGroup.prototype.onRemove.call(this, map);\n        },\n\n        _draw: function () {\n            var pathOpts = {};\n            var pulseOpts = {};\n\n            L.extend(pulseOpts, this.options);\n            L.extend(pathOpts, this.options);\n\n            pulseOpts.color = pulseOpts.pulseColor || this.options.pulseColor;\n            pulseOpts.className = this._animatedPathClass + ' ' + this._animatedPathid;\n\n            delete pathOpts.dashArray;\n\n            this.addLayer(L.polyline(this._path, pathOpts));\n            this.addLayer(L.polyline(this._path, pulseOpts));\n        },\n\n        _calculateAnimationSpeed: function () {\n            var zoomLevel = this._map.getZoom();\n            var animatedPolyElement = document.getElementsByClassName(this._animatedPathid);\n\n            //Get the animation duration (in seconds) based on the given delay and the current zoom level\n            var animationDuration = 1 + (this.options.delay / 3) / zoomLevel + 's';\n\n            //TODO Use requestAnimationFrame to support IE\n            animatedPolyElement[0].setAttribute('style', '-webkit-animation-duration:' + animationDuration);\n            animatedPolyElement[0].setAttribute('style', '-moz-animation-duration:' + animationDuration);\n            animatedPolyElement[0].setAttribute('style', 'animation-duration:' + animationDuration);\n        }\n    });\n\n    return AntPath;\n}, window));\n\n"],"sourceRoot":"/source/"}